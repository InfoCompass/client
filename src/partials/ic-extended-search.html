<h1>
	<span class ="icon icon-interface-search"></span>
	{{'INTERFACE.EXTENDED_SEARCH_HEADING' | translate}}
</h1>	


<h2>{{'INTERFACE.EXTENDED_SEARCH_LABEL' | translate}}</h2>	

<ic-search
	ic-debounce = "500"
>
</ic-search>

<h2>{{'INTERFACE.EXTENDED_SEARCH_TAXONOMY' | translate}}</h2>	

<div class ="buttons">

	<select
		class		= "border-2 padding rounded icon icon right icon-interface-down"
		ng-repeat 	= "filter in filters"
		ng-model	= "filter.data"
		ng-class	= "{ 'bg-5' : filter.data}"

	> 

		<option			
			ng-if = "filter.type === 'categories'"
			value = ""
		>
			{{'INTERFACE.SELECT_NO_VALUE' | translate}} {{'ITEMS.CATEGORY' | fill: filter.name | translate}}
		</option>


		<option
			ng-if		= "filter.type === 'categories'"
			ng-repeat 	= "option in filter.options | orderBy : ic.utils.evalItems('item.substr(0,4) == \'misc\' ? null : (\'CATEGORIES.%s\' | fill : item | translate)')"
			value		= "{{option}}"
		>
			{{'CATEGORIES.%s' | fill: option | translate}}
		</option>



		<option
			ng-if = "filter.type === 'tagGroup'"
			value = ""
		>
			{{'INTERFACE.SELECT_NO_VALUE' | translate}} {{'ITEMS.%s' | fill: filter.name | translate}}
		</option>



		<option
			ng-if		= "filter.type === 'tagGroup'"
			ng-repeat 	= "option in filter.options | orderBy : ic.utils.evalItems('item.substr(0,4) == \'misc\' ? null : (\'UNSORTED_TAGS.%s\' | fill : item | translate)')"
			value		= "{{option}}"
		>
			{{'UNSORTED_TAGS.%s' | fill: option | translate}}
		</option>






		<option
			ng-if = "filter.type === 'itemProperty'"
			value = ""
		>
			{{'INTERFACE.SELECT_NO_VALUE' | translate}} {{'ITEMS.%s' | fill: filter.name | translate}}
		</option>



		<option
			ng-if		= "filter.type === 'itemProperty'"
			ng-repeat 	= "option in filter.options | orderBy"
			value		= "{{option}}"
		>
			{{ option }}
		</option>

	</select>

	
</div>

<h2>{{'INTERFACE.EXTENDED_SEARCH_RANGE' | translate}}</h2>	

<div>
	{{'INTERFACE.CURRENT_POSITION'| translate }}:
	<span		
		ng-if = "!position.coordinates" 
	>
		{{'INTERFACE.CURRENT_POSITION_UNKNOWN'| translate }}
	</span>
	<span
		ng-if = "position.coordinates" 
		class = "left icon icon-interface-position_marker"
	>
		{{position.coordinates}}
	</span>

	<button
		ng-if		= "position.coordinates" 
		class		= "rounded padding border-2 icon icon-interface-close left"
		ng-click	= "clearPosition()"
	>
		{{'INTERFACE.CURRENT_POSITION_CLEAR'| translate }}
	</button>
</div>

<div class = "buttons">	

	<input 
		class				= "border-2 padding"
		ng-model			= "position.zip"
		ng-model-options	= "{ debounce:500 }"
		placeholder			= "{{'INTERFACE.PLACEHOLDER_ZIP' | translate}}" 
	/>
	

	<button
		class	 	= "border-2 padding rounded"
		ng-click	= "pickCoordinates()"
		title		= "{{'INTERFACE.PICK_COORDINATES' | translate}}"
	>
		{{'INTERFACE.PICK_COORDINATES' | translate}}
	</button>

	<button
		class	 	= "border-2 padding rounded"
		ng-click	= "locate()"
		title		= "{{'INTERFACE.GET_POSITION_METHOD_AUTO' | translate}}"
	>
		{{'INTERFACE.GET_POSITION_METHOD_AUTO' | translate}}
	</button>	

</div>

<br/>

{{'INTERFACE.EXTENDED_SEARCH_RADIUS' | translate}}

<div 
	ng-init = "ranges = [1, 5, 10, 20, 50]"
	class	= "buttons"
>

	<button
		ng-repeat 	= "range in ranges"
		ng-disabled	= "!position.coordinates"
		class		= "rounded border-2 padding" 
		ng-click	= "ic.site.range = ic.site.range == range ? undefind : range"
		ng-class	= "{ 'bg-5': ic.site.range == range}"
		title		= "{{ position.coordinates ? '' : ('INTERFACE.CURRENT_POSITION'| translate) +':'+('INTERFACE.CURRENT_POSITION_UNKNOWN'| translate) }}"
	>
		{{range}} km
	</button>	

</div>


<h2>{{'INTERFACE.EXTENDED_SEARCH_DATE' | translate}}</h2>

<div class ="buttons">
	<a 
		class 	= "padding rounded border-2"
		ng-href	= "{{ {calendar: true, start: today, end:today} | icLink }}"
	>
		{{'INTERFACE.TODAY' | translate }}
	</a>

	<a 
		class 	= "padding rounded border-2"
		ng-href	= "{{ {calendar: true, start: tomorrow, end:tomorrow} | icLink }}"
	>
		{{'INTERFACE.TOMORROW' | translate }}
	</a>

	<a 
		class 	= "padding rounded border-2"
		ng-href	= "{{ {calendar: true, start: weekend[0], end:weekend[1]} | icLink }}"
	>
		{{'INTERFACE.WEEKEND' | translate }}
	</a>
</div>

<hr/>

<div class = "results">
	<a
		class 	= "bg-3 rounded padding large"
		ng-href = "{{ { list: true } | icLink }}"
	>
		{{'INTERFACE.EXTENDED_SEARCH_RESULTS' | translate : { number:ic.itemStorage.filteredList.length } }}
	</a>
</div>