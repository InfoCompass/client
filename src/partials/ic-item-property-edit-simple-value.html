<form 
	ng-if		= "icItem && icEdit"
	ng-submit 	= "allowLocalEdit && update()"
	ng-class	= "{invalid: errors}"
>

	<div 
		ng-if 	= "!hideCurrentValue"
		class	= "current-value {{diff()? 'diff': ''}}"
	>
		{{ value.current || ('INTERFACE.PROPERTY_EMPTY' | translate) }}

		<button
			ng-click	= "revert()" 
			ng-disabled	= "updating ||!diff()"
			type		= "button"
		>
			{{ "INTERFACE.PROPERTY_REVERT" | translate }}
		</buton>
	</div>	

	<div 
		class 		= "input-wrapper"
		ng-class 	= "{'extra-padding': icProperty.max}" 
	> 
		<input 
			ng-if				= "icType == 'string'"
			type 				= "text"
			ng-model			= "value.edit"
			ng-model-options	= "{updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 }, allowInvalid}"
			class				= "bg-1"
			maxlength			= "{{icProperty.max}}"
			ng-trim				= "false"
		></input>

		<textarea
			ng-if				= "icType == 'text'"
			ng-model			= "value.edit"
			ng-model-options	= "{updateOn: 'default blur', debounce: { 'default': 500, 'blur': 0 }, allowInvalid}"
			ng-trim				= "false"
			class				= "bg-1"	
			ic-auto-grow
		>
		</textarea>


		<div ng-if = "icProperty.max">
			{{value.edit.length}} / {{icProperty.max}}
		</div>
	</div>


	<div class  = "note">{{"ITEMS.%s_NOTE" | fill : (icTranslationKey || icKey) | translate }}</div>
	<div ng-if = "error && !icHideErrors" class = "error col-3"> {{'ITEMS.%s_%s' | fill : [(icTranslationKey || icKey), error.code] | translate}} </div>

	<button
		ng-show		= "allowLocalEdit"
		ng-disabled	= "updating || !diff()" 
		type 		= "submit"
	>
		{{ "INTERFACE.PROPERTY_UPDATE" | translate }}
	</buton>

</form>
